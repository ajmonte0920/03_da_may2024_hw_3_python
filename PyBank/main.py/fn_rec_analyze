# import os module 
import os

# import csv file module
import csv

# csv path 
csvpath = "PyBank/Resources/budget_data.csv"

# list the variables
month_count = 0
total_profit = 0

# list the for changes
last_month_profit = 0
changes = []
month_changes = []

# reading method: improved reading using csv module 
with open(csvpath) as csvfile:
     
    '''# open csv with utf-8 
    with open(csvpath, encoding = 'UTF-8') as csvfile:
        csvreader = csv.reader(csvfile, delimiter=",")

        # read header 
        csv_header = next(csvreader)
        print(f"CSV Header: {csv_header}")

        # read data rows
        for row in csvreader:
            print(row)
        
        # get month count
        month_count += 1
        print(month_count)

        # get total profit 
        total_profit = total_profit + int(row[1])
        print(total_profit)'''

    csvreader = csv.reader(csvfile, delimiter=',')

    print(csvreader)

    # read header 
    csv_header = next(csvreader)
    print(f"CSV Header: {csv_header}")

    # read each row of data after the header 
    for row in csvreader:
            print(row)

            # get month count
            month_count += 1
            print(month_count)

            # get total profit 
            total_profit = total_profit + int(row[1])
            print(total_profit)

            # calc changes info (precursor)
            if (month_count == 1):
                last_month_profit = int(row[1])
            else:
                 change = int(row[1]) - last_month_profit
                 changes.append(change)
                 month_changes.append(row[0])

                 # reset last month profit
                 last_month_profit = int(row[1])
    print(len(changes))

    #get average change
    avg_change = sum(changes) / len(changes)
    print(avg_change)

    #get changes
    max_change = max(changes)
    max_month_indx = changes.index(max_change)
    max_month = month_changes[max_month_indx]
    min_change = min(changes)
    min_month_indx = changes.index(min_change)
    min_month = month_changes[min_month_indx]
    print(max_change)
    print(max_month)
    print(min_change)
    print(min_month)







    
